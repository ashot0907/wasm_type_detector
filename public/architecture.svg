<!--?xml version="1.0" encoding="UTF-8"?-->
<svg width="1140" height="540" viewBox="0 0 1140 540" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0" stop-color="#00D0FF"></stop>
      <stop offset="1" stop-color="#7C3AED"></stop>
    </linearGradient>
    <style>
      .card { fill:#151821; stroke:#232633; stroke-width:2; rx:16; }
      .muted { fill:#a3acc2; font: 14px/1.4 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
      .h { fill:white; font: 16px/1.4 Inter, system-ui, -apple-system, "Segoe UI"; font-weight:600;}
      .badge { fill: url(#g1); }
      .code { fill:#0f121a; stroke:#232633; stroke-width:1.5; rx:10; }
      .mono { fill:#d9e0f2; font: 13px/1.45 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New"; }
      .arrow { stroke:#3a4257; stroke-width:2.5; marker-end:url(#m1);}
      .arrow2 { stroke:url(#g1); stroke-width:2.5; marker-end:url(#m2);}
      .tick { fill:#0f121a; stroke:#3d445a; stroke-width:1.5; }
    </style>
    <marker id="m1" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#3a4257"></path>
    </marker>
    <marker id="m2" markerWidth="10" markerHeight="10" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="url(#g1)"></path>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1140" height="540" fill="#0E0F13"></rect>
  <rect x="24" y="24" width="1092" height="492" class="card"></rect>

  <!-- Title -->
  <text x="48" y="64" class="h">DuckDB-WASM Type Detector — Architecture</text>
  <text x="48" y="86" class="muted">Everything runs in the browser. No backend.</text>

  <!-- Column: Browser UI -->
  <rect x="60" y="120" width="300" height="360" class="card"></rect>
  <text x="80" y="152" class="h">Browser UI</text>
  <text x="80" y="178" class="muted">Vite • React • Tailwind</text>

  <!-- UI items -->
  <rect x="80" y="200" width="260" height="64" class="code"></rect>
  <text x="96" y="226" class="muted">1) Upload CSV</text>
  <text x="96" y="248" class="mono">File → ArrayBuffer</text>

  <rect x="80" y="276" width="260" height="88" class="code"></rect>
  <text x="96" y="302" class="muted">2) Select Target DBs</text>
  <text x="96" y="324" class="mono">ClickHouse, PostgreSQL, MySQL, Oracle</text>
  <text x="96" y="342" class="mono">MongoDB, Redis, Neo4j</text>

  <rect x="80" y="372" width="260" height="88" class="code"></rect>
  <text x="96" y="398" class="muted">3) View Schema</text>
  <text x="96" y="420" class="mono">Name | Target Types | DuckDB Type</text>

  <!-- Column: DuckDB-WASM -->
  <rect x="420" y="120" width="300" height="360" class="card"></rect>
  <text x="440" y="152" class="h">DuckDB-WASM</text>
  <text x="440" y="178" class="muted">Web Worker + WASM</text>

  <rect x="440" y="200" width="260" height="64" class="code"></rect>
  <text x="456" y="226" class="muted">read_csv_auto(...)</text>
  <text x="456" y="248" class="mono">DESCRIBE SELECT * FROM ...</text>

  <rect x="440" y="276" width="260" height="64" class="code"></rect>
  <text x="456" y="302" class="muted">VFS (in-memory)</text>
  <text x="456" y="324" class="mono">registerFileBuffer(vpath, buf)</text>

  <rect x="440" y="352" width="260" height="108" class="code"></rect>
  <text x="456" y="378" class="muted">Type Result</text>
  <text x="456" y="400" class="mono">[{ name, duckType }]</text>
  <text x="456" y="420" class="mono">+ optional nullable</text>

  <!-- Column: Mapping / Export -->
  <rect x="780" y="120" width="300" height="360" class="card"></rect>
  <text x="800" y="152" class="h">Mapping &amp; Export</text>
  <text x="800" y="178" class="muted">Client-side only</text>

  <rect x="800" y="200" width="260" height="64" class="code"></rect>
  <text x="816" y="226" class="muted">Type Mapping</text>
  <text x="816" y="248" class="mono">mapDuckToTarget(duck, db)</text>

  <rect x="800" y="276" width="260" height="88" class="code"></rect>
  <text x="816" y="302" class="muted">Export</text>
  <text x="816" y="324" class="mono">Copy DDL / Schema</text>
  <text x="816" y="342" class="mono">Export table as CSV</text>

  <rect x="800" y="372" width="260" height="88" class="code"></rect>
  <text x="816" y="398" class="muted">Security</text>
  <text x="816" y="420" class="mono">No server • No data leaves browser</text>

  <!-- Arrows -->
  <path d="M360 232 C 390 232, 390 232, 420 232" class="arrow"></path>
  <path d="M360 310 C 390 310, 390 310, 420 310" class="arrow"></path>
  <path d="M700 232 C 730 232, 730 232, 780 232" class="arrow2"></path>
  <path d="M700 406 C 730 406, 730 406, 780 406" class="arrow2"></path>

  <!-- Legend -->
  <rect x="60" y="490" width="16" height="16" class="tick"></rect>
  <text x="82" y="503" class="muted">UI Panels / Data</text>
  <line x1="200" y1="498" x2="240" y2="498" class="arrow"></line>
  <text x="248" y="503" class="muted">Data flow</text>
  <line x1="360" y1="498" x2="400" y2="498" class="arrow2"></line>
  <text x="408" y="503" class="muted">Mapped types / export</text>
</svg>
